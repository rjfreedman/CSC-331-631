<!DOCTYPE html>
<html lang = "en">
<head>
  <title> DEAC Cluster System Monitor </title>
  <!-- charset allows bootstrap characters -->
  <meta charset = "utf-8">
  <!-- viewport should allow bootstrap to resize for viewing device -->
  <meta name = "viewport" content = "width = device-width, initial-scale =1">
  <!-- Getting the bootstrap libraries for CSS from a CDN-->
  <!-- Kathryn added this bootstrap to get containers for page set up-->
  <link rel = "stylesheet" href = "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <!-- Kanika needs these bootstrap and style for drop down menu check box functionality -->
  <link href="https://cdn-na.infragistics.com/igniteui/2016.2/latest/css/themes/infragistics/infragistics.theme.css" rel="stylesheet" />
    <link href="https://cdn-na.infragistics.com/igniteui/2016.2/latest/css/structure/infragistics.css" rel="stylesheet" />

    <script src="https://ajax.aspnetcdn.com/ajax/modernizr/modernizr-2.8.3.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="https://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>

    <!-- Ignite UI Required Combined JavaScript Files -->
    <script src="https://cdn-na.infragistics.com/igniteui/2016.2/latest/js/infragistics.core.js"></script>
    <script src="https://cdn-na.infragistics.com/igniteui/2016.2/latest/js/infragistics.lob.js"></script>

    <style>
            .combo-label {margin-bottom:.5em; align-items:right; }
    </style>
    <!-- Lee's table style currently styling ALL tables on page -->
    <style>
            table, tr, th{
                border: 1px solid black;
                border-collapse: collapse;
            }
            table#overall_status_table{
                margin-left: auto;
                margin-right: auto;
            }
            tr, th{
                padding: 5px
            }
        </style>


</head>
<body>
  <!-- adding containers to ensure the page resizes well on different devices -->
<div class="container-fluid">
<div class = "row">
  <!-- This is the top of the page, small container at each side for logo/update info, large box in middle for title -->
  <div class="col-sm-2"><p>logo?</p> </div>
  <div class="col-sm-8"><h1>DEAC Cluster System Monitor</h1></div>
  <div class="col-sm-2">last update time / date</div>
</div>

<div class="container-fluid">
<div class="row">
  <!-- All columns equal, change col-sm-* to change this, all must add to 12 -->
  <!-- Can put a collapsible button under the infographic in each of the first 2 to control expansion of overall info -->
  <div class="col-sm-4">
    <p> put overall cluster status infographic here! </p>
    <p> put expansion button here </p>
  </div>
  <div class="col-sm-4">
    <p> put cluster health infographic here! </p>
    <p> put expansion button here </p>
  </div>
  <div class="col-sm-4">
    <p> put per chassis information acces here! </p>
  </div>
</div>

<!-- Status Table by Lee -->
<div id="statusTable">
<table id="overall_status_table">
                <tr>
                    <th>Running Jobs</th>
                    <th>Queued Jobs</th>
                    <th>Number of CPUs</th>
                </tr>
            </table>
</div>
<!-- Health Table, Alexis will repplace text with table! -->
<div id="healthTable">
Put cluster health table here
</div>
<!-- Kanika's Chassis Information table and drop down -->
<div id="ChassisInfo">
  <br></br>
        <br></br>
    <h4 class="combo-label">Single/Multiple Selection of chasis with Checkboxes</h4>
    <div id="checkboxSelectCombo" ></div>
    <script type="text/javascript">
        var chasiss = [
            { Name: "Chasis 1" },
            { Name: "Chasis 2" },
            { Name: "Chasis 3" },
            { Name: "Chasis 4" }
        ];
        $(function () {
            $("#checkboxSelectCombo").igCombo({
                width: "270px",
                dataSource: chasiss,
                textKey: "Name",
                valueKey: "Name",
                multiSelection: {
                    enabled: true,
                    showCheckboxes: true
                }
            });
        });
    </script>

  <table id="per_chasis_detailed_information_table">
                <tr>
                    <th>Chassis</th>
                    <th>Utilization</th>
                    <th>Number of CPUs Available</th>
                    <th>Total Number of CPUs</th>
                    <th>Memory Utilization</th>
                </tr>
            </table>
</div> <!-- end chassisInfo div -->




</body>
</html>

<!-- start Riana's code -->
<!-- comment out this code until have file path set up - works locally with specified file path and sample file -->

<!-- <script>

  // Read in the file...
  // Resource used to assist:
  // http://stackoverflow.com/questions/27522979/read-a-local-text-file-using-javascript?noredirect=1&lq=1

  // Note: This works for a static filename/local location...

  // Declare a variable to hold the contents of the CSV file in...
  var csvFile;

  //For now, store the static path to the CSV file in a variable...
  //This may be adjusted to support the location of the file on the server...
  var filePath = ""; // Note: Will need to add the file path here once it is set...this has been tested with a local file path...

  // Use XMLHttpRequest to read the contents of the data file and store them in variable csvFile.
  var contents = new XMLHttpRequest();
  contents.open("GET", filePath, false);
  contents.onreadystatechange = function ()
  {
     if(contents.readyState === 4 && (contents.status === 200 || contents.status == 0))
     {
             csvFile = contents.responseText;
     }
  }
  contents.send(null);

  // Parse the data file by rows (newline character-delimited)...
  // Store each row in an element of rows.
  var rows = csvFile.split("\n");

  // Access the HTML table to be updated with this data.
  var overallStatusTable = document.getElementById("overall_status_table");

  // Iterate through each column in the table and insert the values of the row in
  // that element...

  // Skip the first row as it is the column headers.
  // ***Note that it will be important to populate the headers of the table from the file
  // as well in order to allow for the data file/data population to be dynamic.***
  for(var r = 1; r < rows.length-1; r++)
  {
    // Add a row to the table.
    var newRow = overallStatusTable.insertRow(r);

    // Parse this comma-delimited row...
    var thisRow = rows[r].split(",");

    // Populate the newly created row...
    // ***Note that (in a later iteration), the size of the table will need
    // to potentially dynamically change to accommodate the longest data entry.***
    for(var c = 0; c < thisRow.length; c++)
    {
      // Add element e to the current row in column c.
      var cell = newRow.insertCell(c);
      //cell.style.border = "initial"; //trying to add column delimiters in table
      cell.innerHTML = thisRow[c];
    }
  }

  //////////////////////////////////////////////////////////////////////////////
  // NOTES for future iterations/once I have access to the data file...
  // ***Note: We somehow need to show the lines between the columns...***
  // ***It may also be useful to erase the table and redraw it with each
  // reload of the table to avoid accidentally appending to it, etc.***

  //////////////////////////////////////////////////////////////////////////////
  // Questions that will be answered by sample data to be provided by the HPC Team:

  // Do we need to redraw the table each time read file?
  // Will we have one file or a file per table?

  // For overallStatusTable, okay to take the data straight from the file
  // each time it is needed...
  // Need to do this for other tables, as well, in case the data changes.
  // -OR-
  // Could have a flag to check to tell whether or not the data file was altered.
  // In this case, could store to a file and have an event triggered when the file
  // is refreshed (for example), saying the file has been altered...
  // Would also need a flag to tell if the file fails to exist.

  // In either case, would store the current data in a data structure in case some updated
  // error occurs (?), but likely best to read straight from file every time
  // to ensure the most up-to-date info...

</script> -->

<!-- end Riana's code -->
